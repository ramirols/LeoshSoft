---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { ArrowUpRight } from "lucide-astro";

export async function getStaticPaths() {
    const projects = await getCollection("proyectos");
    return projects.map((project) => ({
        params: { slug: project.id },
        props: { project },
    }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<BaseLayout
    title={`${project.data.title} | Proyectos`}
    description={project.data.description}
    image={project.data.cover}
    type="article"
>
    <article class="max-w-4xl mx-auto mt-[160px] px-6">
        <!-- Imagen -->
        {
            project.data.cover && (
                <img
                    src={project.data.cover}
                    alt={project.data.title}
                    class="w-full rounded-2xl shadow-sm"
                />
            )
        }

        <!-- Header -->
        <header class="mb-10">
            <h1 class="text-3xl md:text-4xl font-bold leading-tight">
                {project.data.title}
            </h1>

            <p class="text-gray-600 text-lg mt-4 max-w-2xl">
                {project.data.description}
            </p>
        </header>

        <!-- Contenido -->
        <div class="prose prose-neutral prose-lg max-w-none">
            <Content />
        </div>

        <!-- CTA -->
        {
            project.data.url && (
                <div class="mt-16">
                    <a
                        href={project.data.url}
                        target="_blank"
                        class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-primary text-white font-semibold hover:bg-primary/90 transition"
                    >
                        Visitar sitio
                        <ArrowUpRight class="w-5 h-5" />
                    </a>
                </div>
            )
        }
    </article>
</BaseLayout>
