---
const {
    title = "ContÃ¡ctanos y hagamos realidad tu proyecto",
    subtitle = "CuÃ©ntanos sobre tu idea, negocio o necesidad digital. Te responderemos en menos de 24 horas.",
} = Astro.props;
---

<section id="contacto" class="relative max-w-3xl mx-auto px-6 py-20">
    <!-- Header -->
    <header class="text-center mb-12 animate-fade-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
            {title}
        </h2>
        <p class="text-gray-600 max-w-xl mx-auto">
            {subtitle}
        </p>
    </header>

    <!-- Form -->
    <form
        id="contactForm"
        class="space-y-6 bg-white shadow-2xl p-8 md:p-10 rounded-3xl border animate-fade-up animation-delay-200"
    >
        <!-- Nombre -->
        <div>
            <label for="name" class="block text-sm font-medium mb-1">
                Nombre completo
            </label>
            <input
                id="name"
                name="name"
                type="text"
                required
                minlength="3"
                placeholder="Ej. Juan PÃ©rez"
                class="w-full rounded-xl border px-4 py-3 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
        </div>

        <!-- Email -->
        <div>
            <label for="email" class="block text-sm font-medium mb-1">
                Correo electrÃ³nico
            </label>
            <input
                id="email"
                name="email"
                type="email"
                required
                placeholder="correo@empresa.com"
                class="w-full rounded-xl border px-4 py-3 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            />
        </div>

        <!-- Mensaje -->
        <div>
            <label for="message" class="block text-sm font-medium mb-1">
                CuÃ©ntanos sobre tu proyecto
            </label>
            <textarea
                id="message"
                name="message"
                rows="5"
                required
                minlength="10"
                placeholder="Necesito una pÃ¡gina web, sistema, tienda online, etc."
                class="w-full rounded-xl border px-4 py-3 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            ></textarea>
            <p class="text-xs text-gray-500 mt-1">
                Mientras mÃ¡s detalles, mejor podrÃ© ayudarte ðŸš€
            </p>
        </div>

        <!-- CTA -->
        <button
            type="submit"
            class="group relative w-full overflow-hidden rounded-xl bg-secondary py-3 font-semibold text-white transition hover:bg-secondary/80 focus:outline-none focus:ring-2 focus:ring-secondary/80 cursor-pointer"
        >
            <span class="relative z-10">Enviar mensaje</span>
            <span
                class="absolute inset-0 -translate-x-full bg-secondary/80 transition-transform duration-300 group-hover:translate-x-0"
            ></span>
        </button>

        <!-- Trust -->
        <p class="text-center text-xs text-gray-500 pt-2">
            ðŸ”’ Tu informaciÃ³n es confidencial. No spam, solo contacto directo.
        </p>
    </form>
</section>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("contactForm");
        if (!form) return;

        form.addEventListener("submit", (e) => {
            e.preventDefault();

            const data = new FormData(form);

            const name = data.get("name");
            const email = data.get("email");
            const message = data.get("message");

            const whatsappMessage = `
Hola ðŸ‘‹, soy *${name}*

ðŸ“§ Email: ${email}

ðŸ’¬ Mensaje:
${message}
            `;

            const url = `https://wa.me/51997676432?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(url, "_blank");
        });
    });
</script>

<style>
    @keyframes fade-up {
        from {
            opacity: 0;
            transform: translateY(24px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-up {
        animation: fade-up 0.6s ease forwards;
    }

    .animation-delay-200 {
        animation-delay: 0.2s;
    }
</style>
